#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void cipher(const char *a, char *c, int l);
void decipher(const char *c, char *d, int l);

int main() {
    int l;
    char a[20], c[20], d[20];

    printf("\n\t\t RAIL FENCE TECHNIQUE");
    printf("\n\nEnter the input string: ");
    fgets(a, sizeof(a), stdin);
    // Remove newline character if present
    a[strcspn(a, "\n")] = 0;

    l = strlen(a);

    cipher(a, c, l);
    printf("\nCipher text after applying rail fence: %s\n", c);

    decipher(c, d, l);
    printf("\nText after decryption: %s\n", d);

    return 0;
}

void cipher(const char *a, char *c, int l) {
    int i, j;
    for (i = 0, j = 0; i < l; i++) {
        if (i % 2 == 0) {
            c[j++] = a[i];
        }
    }
    for (i = 0; i < l; i++) {
        if (i % 2 == 1) {
            c[j++] = a[i];
        }
    }
    c[j] = '\0';
}

void decipher(const char *c, char *d, int l) {
    int i, j, k;
    if (l % 2 == 0) {
        k = l / 2;
    } else {
        k = (l / 2) + 1;
    }
    for (i = 0, j = 0; i < k; i++) {
        d[j] = c[i];
        j += 2;
    }
    for (i = k, j = 1; i < l; i++) {
        d[j] = c[i];
        j += 2;
    }
    d[l] = '\0';
}
